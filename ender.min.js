/*!
  * =======================================================
  * Ender: open module JavaScript framework
  * copyright Dustin Diaz & Jacob Thornton 2011 (@ded @fat)
  * https://ender.no.de
  * License MIT
  * Module's individual licenses still apply
  * Build: ender -b domready qwery ender-dragdealer
  * =======================================================
  */

!function(a){function g(a,b){return f(a,b)}function f(a,b,c){g._select&&(typeof a=="string"||a.nodeName||a.length&&"item"in a||a==window)?(c=g._select(a,b),c.selector=a):c=isFinite(a.length)?a:[a];return e(c,f)}function e(a,b){for(var c in b)c!="noConflict"&&c!="_VERSION"&&(a[c]=b[c]);return a}function d(a,c){return b[a]=c}function c(a){var c=b[a]||window[a];if(!c)throw new Error("Requested module '"+a+"' has not been defined.");return c}a.global=a;var b={};a.provide=d,a.require=c,e(g,{_VERSION:"0.2.5",ender:function(a,b){e(b?f:g,a)},fn:a.$&&a.$.fn||{}}),e(f,{forEach:function(a,b,c){for(c=0,l=this.length;c<l;++c)c in this&&a.call(b||this[c],this[c],c,this);return this},$:g});var h=a.$;g.noConflict=function(){a.$=h;return this},typeof module!="undefined"&&module.exports&&(module.exports=g),a.ender=a.$=a.ender||g}(this),!function(){var a={exports:{}},b=a.exports;!function(a,b){function m(a){l=1;while(a=c.shift())a()}var c=[],d,e,f=!1,g=b.documentElement,h=g.doScroll,i="DOMContentLoaded",j="addEventListener",k="onreadystatechange",l=/^loade|c/.test(b.readyState);b[j]&&b[j](i,e=function(){b.removeEventListener(i,e,f),m()},f),h&&b.attachEvent(k,d=function(){/^c/.test(b.readyState)&&(b.detachEvent(k,d),m())}),a.domReady=h?function(b){self!=top?l?b():c.push(b):function(){try{g.doScroll("left")}catch(c){return setTimeout(function(){a.domReady(b)},50)}b()}()}:function(a){l?a():c.push(a)}}(this,document),provide("domready",a.exports),!function(a){a.ender({domReady:domReady}),a.ender({ready:function(a){domReady(a);return this}},!0)}(ender)}(),!function(){var a={exports:{}},b=a.exports;!function(a,b){function _(a,c){var d=typeof c=="string"?_(c)[0]:c||b;return!d||!a?[]:(h=Y(a,c,_))?h:bb(a,d)}function $(a){var b=[],c,d;label:for(c=0;c<a.length;c++){for(d=0;d<b.length;d++)if(b[d]==a[c])continue label;b[b.length]=a[c]}return b}function Z(a){return a&&a.nodeType&&(a.nodeType==1||a.nodeType==9)}function Y(a,c,d){var e=typeof c=="string"?d(c)[0]:c||b;return a===window||Z(a)?!c||a!==window&&Z(e)&&ba(a,e)?[a]:[]:a&&typeof a=="object"&&isFinite(a.length)?R(a):(h=a.match(x))?(m=b.getElementById(h[1]))?[m]:[]:(h=a.match(z))?R(e.getElementsByTagName(h[1])):!1}function X(a){var c=[],d=[],e,f=0,g,h,i,j,k,l,m,n,o,q,r,s=Q.g(a)||Q.s(a,a.split(F)),t=a.match(E),u;s=s.slice(0);if(!s.length)return c;k=s.pop(),n=s.length&&(i=s[s.length-1].match(x))?b.getElementById(i[1]):b;if(!n)return c;o=T(k),m=t&&/^[+~]$/.test(t[t.length-1])?function(a){while(n=n.nextSibling)n.nodeType==1&&(o[1]?o[1]==n.tagName.toLowerCase():1)&&a.push(n);return a}([]):n.getElementsByTagName(o[1]||"*");for(e=0,h=m.length;e<h;e++)if(q=U.apply(m[e],o))c[f++]=q;if(!s.length)return c;for(f=0,h=c.length,g=0;f<h;f++){j=c[f];for(e=s.length;e--;)while(j=L[t[e]](j,c[f]))if(p=U.apply(j,T(s[e])))break;p&&(d[g++]=c[f])}return d}function W(a,b,c){switch(a){case"=":return b==c;case"^=":return b.match(P.g("^="+c)||P.s("^="+c,new RegExp("^"+V(c))));case"$=":return b.match(P.g("$="+c)||P.s("$="+c,new RegExp(V(c)+"$")));case"*=":return b.match(P.g(c)||P.s(c,new RegExp(V(c))));case"~=":return b.match(P.g("~="+c)||P.s("~="+c,new RegExp("(?:^|\\s+)"+V(c)+"(?:\\s+|$)")));case"|=":return b.match(P.g("|="+c)||P.s("|="+c,new RegExp("^"+V(c)+"(-|$)")))}return 0}function V(a){return O.g(a)||O.s(a,a.replace(G,"\\$1"))}function U(a,b,c,e,f,g,h,j,k,l,m){var n,o,p;if(b&&this.tagName.toLowerCase()!==b)return!1;if(c&&(n=c.match(v))&&n[1]!==this.id)return!1;if(c&&(q=c.match(w)))for(d=q.length;d--;){o=q[d].slice(1);if(!(N.g(o)||N.s(o,new RegExp("(^|\\s+)"+o+"(\\s+|$)"))).test(this.className))return!1}if(k&&_.pseudos[k]&&!_.pseudos[k](this,m))return!1;if(e&&!h){i=this.attributes;for(p in i)if(Object.prototype.hasOwnProperty.call(i,p)&&(i[p].name||p)==f)return this}return e&&!W(g,this.getAttribute(f)||"",h)?!1:this}function T(a){return a.match(K)}function S(a){while(a=a.previousSibling)if(a.nodeType==1)break;return a}function R(a){k=[];for(d=0,o=a.length;d<o;d++)k[d]=a[d];return k}function M(){this.c={}}var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=b.documentElement,v=/#([\w\-]+)/,w=/\.[\w\-]+/g,x=/^#([\w\-]+$)/,y=/^\.([\w\-]+)$/,z=/^([\w\-]+)$/,A=/^([\w]+)?\.([\w\-]+)$/,B=/\s*([\s\+\~>])\s*/g,C=/[\s\>\+\~]/,D=/(?![\s\w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^'"]*\])/,E=new RegExp("("+C.source+")"+D.source,"g"),F=new RegExp(C.source+D.source),G=/([.*+?\^=!:${}()|\[\]\/\\])/g,H=/^([a-z0-9]+)?(?:([\.\#]+[\w\-\.#]+)?)/,I=/\[([\w\-]+)(?:([\|\^\$\*\~]?\=)['"]?([ \w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^]+)["']?)?\]/,J=/:([\w\-]+)(\(['"]?(\w+)['"]?\))?/,K=new RegExp(H.source+"("+I.source+")?"+"("+J.source+")?"),L={" ":function(a){return a&&a!==u&&a.parentNode},">":function(a,b){return a&&a.parentNode==b.parentNode&&a.parentNode},"~":function(a){return a&&a.previousSibling},"+":function(a,b,c,d){if(!a)return!1;c=S(a),d=S(b);return c&&d&&c==d&&c}};M.prototype={g:function(a){return this.c[a]||undefined},s:function(a,b){this.c[a]=b;return b}};var N=new M,O=new M,P=new M,Q=new M,ba="compareDocumentPosition"in u?function(a,b){return(b.compareDocumentPosition(a)&16)==16}:"contains"in u?function(a,c){c=c==b||c==window?u:c;return c!==a&&c.contains(a)}:function(a,b){while(a=a.parentNode)if(a===b)return 1;return 0},bb=b.querySelector&&b.querySelectorAll?function(a,c){return b.getElementsByClassName&&(h=a.match(y))?R(c.getElementsByClassName(h[1])):R(c.querySelectorAll(a))}:function(a,c){a=a.replace(B,"$1");var d=[],f,i=[],j;if(h=a.match(A)){s=c.getElementsByTagName(h[1]||"*"),k=N.g(h[2])||N.s(h[2],new RegExp("(^|\\s+)"+h[2]+"(\\s+|$)"));for(j=0,g=s.length,e=0;j<g;j++)k.test(s[j].className)&&(d[e++]=s[j]);return d}for(j=0,s=a.split(","),g=s.length;j<g;j++)i[j]=X(s[j]);for(j=0,g=i.length;j<g&&(f=i[j]);j++){var l=f;if(c!==b){l=[];for(e=0,h=f.length;e<h&&(element=f[e]);e++)ba(element,c)&&l.push(element)}d=d.concat(l)}return $(d)};_.uniq=$,_.pseudos={};var bc=a.qwery;_.noConflict=function(){a.qwery=bc;return this},a.qwery=_}(this,document),provide("qwery",a.exports),!function(a){function e(b,c){var e=/^<([^\s>]+)/.exec(b)[1],f=(c||a).createElement(d[e]||"div"),g=[];f.innerHTML=b;var h=f.childNodes;f=f.firstChild,g.push(f);while(f=f.nextSibling)f.nodeType==1&&g.push(f);return g}var b=qwery.noConflict(),c="table",d={thead:c,tbody:c,tfoot:c,tr:"tbody",th:"tr",td:"tr",fieldset:"form",option:"select"};$._select=function(a,c){return/^\s*</.test(a)?e(a,c):b(a,c)},$.pseudos=b.pseudos,$.ender({find:function(a){var c=[],d,e,f,g,h;for(d=0,e=this.length;d<e;d++){h=b(a,this[d]);for(f=0,g=h.length;f<g;f++)c.push(h[f])}return $(b.uniq(c))},and:function(a){var b=$(a);for(var c=this.length,d=0,e=this.length+b.length;c<e;c++,d++)this[c]=b[d];return this}},!0)}(document)}(),!function(){var a={exports:{}},b=a.exports;!function(a){function e(a,b){return new d(a,b)}var b={x:0,y:0,init:function(){this.setEvent("mouse"),this.setEvent("touch")},setEvent:function(a){var c=document["on"+a+"move"]||function(){};document["on"+a+"move"]=function(a){c(a),b.refresh(a)}},refresh:function(a){a||(a=window.event),a.type==="mousemove"?this.set(a):a.touches&&this.set(a.touches[0])},set:function(a){if(a.pageX||a.pageY)this.x=a.pageX,this.y=a.pageY;else if(a.clientX||a.clientY)this.x=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.y=a.clientY+document.body.scrollTop+document.documentElement.scrollTop}};b.init();var c={get:function(a){var b=curtop=0;if(a.offsetParent)do b+=a.offsetLeft,curtop+=a.offsetTop;while(a=a.offsetParent);return[b,curtop]}},d=function(a,b){typeof a=="string"&&(a=document.getElementById(a));if(!!a){var c=a.getElementsByTagName("div")[0];if(!c||c.className.search(/(^|\s)handle(\s|$)/)===-1)return;this.init(a,c,b||{}),this.setup()}};d.prototype={init:function(a,b,c){this.wrapper=a,this.handle=b,this.options=c,this.disabled=this.getOption("disabled",!1),this.horizontal=this.getOption("horizontal",!0),this.vertical=this.getOption("vertical",!1),this.slide=this.getOption("slide",!0),this.steps=this.getOption("steps",0),this.snap=this.getOption("snap",!1),this.loose=this.getOption("loose",!1),this.speed=this.getOption("speed",10)/100,this.xPrecision=this.getOption("xPrecision",0),this.yPrecision=this.getOption("yPrecision",0),this.callback=c.callback||null,this.animationCallback=c.animationCallback||null,this.bounds={left:c.left||0,right:-(c.right||0),top:c.top||0,bottom:-(c.bottom||0),x0:0,x1:0,xRange:0,y0:0,y1:0,yRange:0},this.value={prev:[-1,-1],current:[c.x||0,c.y||0],target:[c.x||0,c.y||0]},this.offset={wrapper:[0,0],mouse:[0,0],prev:[-999999,-999999],current:[0,0],target:[0,0]},this.change=[0,0],this.activity=!1,this.dragging=!1,this.tapping=!1},getOption:function(a,b){return this.options[a]!==undefined?this.options[a]:b},setup:function(){this.setWrapperOffset(),this.setBoundsPadding(),this.setBounds(),this.setSteps(),this.addListeners()},setWrapperOffset:function(){this.offset.wrapper=c.get(this.wrapper)},setBoundsPadding:function(){!this.bounds.left&&!this.bounds.right&&(this.bounds.left=c.get(this.handle)[0]-this.offset.wrapper[0],this.bounds.right=-this.bounds.left),!this.bounds.top&&!this.bounds.bottom&&(this.bounds.top=c.get(this.handle)[1]-this.offset.wrapper[1],this.bounds.bottom=-this.bounds.top)},setBounds:function(){this.bounds.x0=this.bounds.left,this.bounds.x1=this.wrapper.offsetWidth+this.bounds.right,this.bounds.xRange=this.bounds.x1-this.bounds.x0-this.handle.offsetWidth,this.bounds.y0=this.bounds.top,this.bounds.y1=this.wrapper.offsetHeight+this.bounds.bottom,this.bounds.yRange=this.bounds.y1-this.bounds.y0-this.handle.offsetHeight,this.bounds.xStep=1/(this.xPrecision||Math.max(this.wrapper.offsetWidth,this.handle.offsetWidth)),this.bounds.yStep=1/(this.yPrecision||Math.max(this.wrapper.offsetHeight,this.handle.offsetHeight))},setSteps:function(){if(this.steps>1){this.stepRatios=[];for(var a=0;a<=this.steps-1;a++)this.stepRatios[a]=a/(this.steps-1)}},addListeners:function(){var a=this;this.wrapper.onselectstart=function(){return!1},this.handle.onmousedown=this.handle.ontouchstart=function(b){a.handleDownHandler(b)},this.wrapper.onmousedown=this.wrapper.ontouchstart=function(b){a.wrapperDownHandler(b)};var b=document.onmouseup||function(){};document.onmouseup=function(c){b(c),a.documentUpHandler(c)};var c=document.ontouchend||function(){};document.ontouchend=function(b){c(b),a.documentUpHandler(b)};var d=window.onresize||function(){};window.onresize=function(b){d(b),a.documentResizeHandler(b)},this.wrapper.onmousemove=function(b){a.activity=!0},this.wrapper.onclick=function(b){return!a.activity},this.interval=setInterval(function(){a.animate()},25),a.animate(!1,!0)},handleDownHandler:function(a){this.activity=!1,b.refresh(a),this.preventDefaults(a,!0),this.startDrag(),this.cancelEvent(a)},wrapperDownHandler:function(a){b.refresh(a),this.preventDefaults(a,!0),this.startTap()},documentUpHandler:function(a){this.stopDrag(),this.stopTap()},documentResizeHandler:function(a){this.setWrapperOffset(),this.setBounds(),this.update()},enable:function(){this.disabled=!1,this.handle.className=this.handle.className.replace(/\s?disabled/g,"")},disable:function(){this.disabled=!0,this.handle.className+=" disabled"},setStep:function(a,b,c){this.setValue(this.steps&&a>1?(a-1)/(this.steps-1):0,this.steps&&b>1?(b-1)/(this.steps-1):0,c)},setValue:function(a,b,c){this.setTargetValue([a,b||0]),c&&this.groupCopy(this.value.current,this.value.target)},startTap:function(a){this.disabled||(this.tapping=!0,a===undefined&&(a=[b.x-this.offset.wrapper[0]-this.handle.offsetWidth/2,b.y-this.offset.wrapper[1]-this.handle.offsetHeight/2]),this.setTargetOffset(a))},stopTap:function(){!this.disabled&&!!this.tapping&&(this.tapping=!1,this.setTargetValue(this.value.current),this.result())},startDrag:function(){this.disabled||(this.offset.mouse=[b.x-c.get(this.handle)[0],b.y-c.get(this.handle)[1]],this.dragging=!0)},stopDrag:function(){if(!this.disabled&&!!this.dragging){this.dragging=!1;var a=this.groupClone(this.value.current);if(this.slide){var b=this.change;a[0]+=b[0]*4,a[1]+=b[1]*4}this.setTargetValue(a),this.result()}},feedback:function(){var a=this.value.current;this.snap&&this.steps>1&&(a=this.getClosestSteps(a)),this.groupCompare(a,this.value.prev)||(typeof this.animationCallback=="function"&&this.animationCallback(a[0],a[1]),this.groupCopy(this.value.prev,a))},result:function(){typeof this.callback=="function"&&this.callback(this.value.target[0],this.value.target[1])},animate:function(a,c){if(!a||!!this.dragging){if(this.dragging){var d=this.groupClone(this.value.target),e=[b.x-this.offset.wrapper[0]-this.offset.mouse[0],b.y-this.offset.wrapper[1]-this.offset.mouse[1]];this.setTargetOffset(e,this.loose),this.change=[this.value.target[0]-d[0],this.value.target[1]-d[1]]}(this.dragging||c)&&this.groupCopy(this.value.current,this.value.target);if(this.dragging||this.glide()||c)this.update(),this.feedback()}},glide:function(){var a=[this.value.target[0]-this.value.current[0],this.value.target[1]-this.value.current[1]];if(!a[0]&&!a[1])return!1;Math.abs(a[0])>this.bounds.xStep||Math.abs(a[1])>this.bounds.yStep?(this.value.current[0]+=a[0]*this.speed,this.value.current[1]+=a[1]*this.speed):this.groupCopy(this.value.current,this.value.target);return!0},update:function(){this.snap?this.offset.current=this.getOffsetsByRatios(this.getClosestSteps(this.value.current)):this.offset.current=this.getOffsetsByRatios(this.value.current),this.show()},show:function(){this.groupCompare(this.offset.current,this.offset.prev)||(this.horizontal&&(this.handle.style.left=String(this.offset.current[0])+"px"),this.vertical&&(this.handle.style.top=String(this.offset.current[1])+"px"),this.groupCopy(this.offset.prev,this.offset.current))},setTargetValue:function(a,b){var c=b?this.getLooseValue(a):this.getProperValue(a);this.groupCopy(this.value.target,c),this.offset.target=this.getOffsetsByRatios(c)},setTargetOffset:function(a,b){var c=this.getRatiosByOffsets(a),d=b?this.getLooseValue(c):this.getProperValue(c);this.groupCopy(this.value.target,d),this.offset.target=this.getOffsetsByRatios(d)},getLooseValue:function(a){var b=this.getProperValue(a);return[b[0]+(a[0]-b[0])/4,b[1]+(a[1]-b[1])/4]},getProperValue:function(a){var b=this.groupClone(a);b[0]=Math.max(b[0],0),b[1]=Math.max(b[1],0),b[0]=Math.min(b[0],1),b[1]=Math.min(b[1],1),(!this.dragging&&!this.tapping||this.snap)&&this.steps>1&&(b=this.getClosestSteps(b));return b},getRatiosByOffsets:function(a){return[this.getRatioByOffset(a[0],this.bounds.xRange,this.bounds.x0),this.getRatioByOffset(a[1],this.bounds.yRange,this.bounds.y0)]},getRatioByOffset:function(a,b,c){return b?(a-c)/b:0},getOffsetsByRatios:function(a){return[this.getOffsetByRatio(a[0],this.bounds.xRange,this.bounds.x0),this.getOffsetByRatio(a[1],this.bounds.yRange,this.bounds.y0)]},getOffsetByRatio:function(a,b,c){return Math.round(a*b)+c},getClosestSteps:function(a){return[this.getClosestStep(a[0]),this.getClosestStep(a[1])]},getClosestStep:function(a){var b=0,c=1;for(var d=0;d<=this.steps-1;d++)Math.abs(this.stepRatios[d]-a)<c&&(c=Math.abs(this.stepRatios[d]-a),b=d);return this.stepRatios[b]},groupCompare:function(a,b){return a[0]===b[0]&&a[1]===b[1]},groupCopy:function(a,b){a[0]=b[0],a[1]=b[1]},groupClone:function(a){return[a[0],a[1]]},preventDefaults:function(a,b){a||(a=window.event),a.preventDefault&&a.preventDefault(),a.returnValue=!1,b&&document.selection&&document.selection.empty()},cancelEvent:function(a){a||(a=window.event),a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0}},a.dragdealer=e}(this),provide("ender-dragdealer",a.exports),!function(a){a.ender({dragdealer:function(a){return dragdealer(el,a)}},!0)}(ender)}()